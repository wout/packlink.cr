<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.0.0">
<meta name="crystal_docs.project_version" content="master">
<meta name="crystal_docs.project_name" content="packlink">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="packlink">
  <title>packlink master</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          packlink
        </a>
      </h1>

      <span class="project-version">
        master
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="packlink/Packlink" data-name="packlink">
      <a href="Packlink.html">Packlink</a>
      
        <ul>
  
  <li class="parent " data-id="packlink/Packlink/A" data-name="packlink::a">
      <a href="Packlink/A.html">A</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/A/HS2" data-name="packlink::a::hs2">
      <a href="Packlink/A/HS2.html">HS2</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/A/Measurement" data-name="packlink::a::measurement">
      <a href="Packlink/A/Measurement.html">Measurement</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/A/ParamsHash" data-name="packlink::a::paramshash">
      <a href="Packlink/A/ParamsHash.html">ParamsHash</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/A/QueryHash" data-name="packlink::a::queryhash">
      <a href="Packlink/A/QueryHash.html">QueryHash</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/A/Scalar" data-name="packlink::a::scalar">
      <a href="Packlink/A/Scalar.html">Scalar</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/A/Zipcode" data-name="packlink::a::zipcode">
      <a href="Packlink/A/Zipcode.html">Zipcode</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Address" data-name="packlink::address">
      <a href="Packlink/Address.html">Address</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Auth" data-name="packlink::auth">
      <a href="Packlink/Auth.html">Auth</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Auth/CreatedResponse" data-name="packlink::auth::createdresponse">
      <a href="Packlink/Auth/CreatedResponse.html">CreatedResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Auth/CreatePath" data-name="packlink::auth::createpath">
      <a href="Packlink/Auth/CreatePath.html">CreatePath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Auth/FindPath" data-name="packlink::auth::findpath">
      <a href="Packlink/Auth/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Auth/FoundResponse" data-name="packlink::auth::foundresponse">
      <a href="Packlink/Auth/FoundResponse.html">FoundResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/AuthCredentialsMissingException" data-name="packlink::authcredentialsmissingexception">
      <a href="Packlink/AuthCredentialsMissingException.html">AuthCredentialsMissingException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Base" data-name="packlink::base">
      <a href="Packlink/Base.html">Base</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Callback" data-name="packlink::callback">
      <a href="Packlink/Callback.html">Callback</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Callback/CreatePath" data-name="packlink::callback::createpath">
      <a href="Packlink/Callback/CreatePath.html">CreatePath</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Callback/Event" data-name="packlink::callback::event">
      <a href="Packlink/Callback/Event.html">Event</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Callback/Event/Data" data-name="packlink::callback::event::data">
      <a href="Packlink/Callback/Event/Data.html">Data</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Client" data-name="packlink::client">
      <a href="Packlink/Client.html">Client</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Config" data-name="packlink::config">
      <a href="Packlink/Config.html">Config</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Customs" data-name="packlink::customs">
      <a href="Packlink/Customs.html">Customs</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Customs/FindPath" data-name="packlink::customs::findpath">
      <a href="Packlink/Customs/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Customs/FoundResponse" data-name="packlink::customs::foundresponse">
      <a href="Packlink/Customs/FoundResponse.html">FoundResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Draft" data-name="packlink::draft">
      <a href="Packlink/Draft.html">Draft</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Draft/CreatedResponse" data-name="packlink::draft::createdresponse">
      <a href="Packlink/Draft/CreatedResponse.html">CreatedResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Draft/CreatePath" data-name="packlink::draft::createpath">
      <a href="Packlink/Draft/CreatePath.html">CreatePath</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Dropoff" data-name="packlink::dropoff">
      <a href="Packlink/Dropoff.html">Dropoff</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Dropoff/AllPath" data-name="packlink::dropoff::allpath">
      <a href="Packlink/Dropoff/AllPath.html">AllPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Dropoff/Item" data-name="packlink::dropoff::item">
      <a href="Packlink/Dropoff/Item.html">Item</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Dropoff/OpeningTimes" data-name="packlink::dropoff::openingtimes">
      <a href="Packlink/Dropoff/OpeningTimes.html">OpeningTimes</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Exception" data-name="packlink::exception">
      <a href="Packlink/Exception.html">Exception</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/ExceptionMessage" data-name="packlink::exceptionmessage">
      <a href="Packlink/ExceptionMessage.html">ExceptionMessage</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/IncompleteQueryException" data-name="packlink::incompletequeryexception">
      <a href="Packlink/IncompleteQueryException.html">IncompleteQueryException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/InvalidEnvironmentException" data-name="packlink::invalidenvironmentexception">
      <a href="Packlink/InvalidEnvironmentException.html">InvalidEnvironmentException</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Label" data-name="packlink::label">
      <a href="Packlink/Label.html">Label</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Label/AllPath" data-name="packlink::label::allpath">
      <a href="Packlink/Label/AllPath.html">AllPath</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/List" data-name="packlink::list(t)">
      <a href="Packlink/List.html">List</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/MethodNotSupportedException" data-name="packlink::methodnotsupportedexception">
      <a href="Packlink/MethodNotSupportedException.html">MethodNotSupportedException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/MissingApiKeyException" data-name="packlink::missingapikeyexception">
      <a href="Packlink/MissingApiKeyException.html">MissingApiKeyException</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Mixins" data-name="packlink::mixins">
      <a href="Packlink/Mixins.html">Mixins</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Mixins/Buildable" data-name="packlink::mixins::buildable">
      <a href="Packlink/Mixins/Buildable.html">Buildable</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Order" data-name="packlink::order">
      <a href="Packlink/Order.html">Order</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Order/CreatedResponse" data-name="packlink::order::createdresponse">
      <a href="Packlink/Order/CreatedResponse.html">CreatedResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Order/CreatePath" data-name="packlink::order::createpath">
      <a href="Packlink/Order/CreatePath.html">CreatePath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Order/Shipment" data-name="packlink::order::shipment">
      <a href="Packlink/Order/Shipment.html">Shipment</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Order/ShipmentLine" data-name="packlink::order::shipmentline">
      <a href="Packlink/Order/ShipmentLine.html">ShipmentLine</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Package" data-name="packlink::package">
      <a href="Packlink/Package.html">Package</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/ParamsMissingException" data-name="packlink::paramsmissingexception">
      <a href="Packlink/ParamsMissingException.html">ParamsMissingException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Path" data-name="packlink::path">
      <a href="Packlink/Path.html">Path</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Proxy" data-name="packlink::proxy">
      <a href="Packlink/Proxy.html">Proxy</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Callback" data-name="packlink::proxy::callback">
      <a href="Packlink/Proxy/Callback.html">Callback</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Customs" data-name="packlink::proxy::customs">
      <a href="Packlink/Proxy/Customs.html">Customs</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Draft" data-name="packlink::proxy::draft">
      <a href="Packlink/Proxy/Draft.html">Draft</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Dropoff" data-name="packlink::proxy::dropoff">
      <a href="Packlink/Proxy/Dropoff.html">Dropoff</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Label" data-name="packlink::proxy::label">
      <a href="Packlink/Proxy/Label.html">Label</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Order" data-name="packlink::proxy::order">
      <a href="Packlink/Proxy/Order.html">Order</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Service" data-name="packlink::proxy::service">
      <a href="Packlink/Proxy/Service.html">Service</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Shipment" data-name="packlink::proxy::shipment">
      <a href="Packlink/Proxy/Shipment.html">Shipment</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Proxy/Tracking" data-name="packlink::proxy::tracking">
      <a href="Packlink/Proxy/Tracking.html">Tracking</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Register" data-name="packlink::register">
      <a href="Packlink/Register.html">Register</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Register/CreatedResponse" data-name="packlink::register::createdresponse">
      <a href="Packlink/Register/CreatedResponse.html">CreatedResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Register/CreatePath" data-name="packlink::register::createpath">
      <a href="Packlink/Register/CreatePath.html">CreatePath</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/RequestException" data-name="packlink::requestexception">
      <a href="Packlink/RequestException.html">RequestException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/RequestTimeoutException" data-name="packlink::requesttimeoutexception">
      <a href="Packlink/RequestTimeoutException.html">RequestTimeoutException</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/ResourceNotFoundException" data-name="packlink::resourcenotfoundexception">
      <a href="Packlink/ResourceNotFoundException.html">ResourceNotFoundException</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Service" data-name="packlink::service">
      <a href="Packlink/Service.html">Service</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Service/AllPath" data-name="packlink::service::allpath">
      <a href="Packlink/Service/AllPath.html">AllPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/CashOnDelivery" data-name="packlink::service::cashondelivery">
      <a href="Packlink/Service/CashOnDelivery.html">CashOnDelivery</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/FindPath" data-name="packlink::service::findpath">
      <a href="Packlink/Service/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/FoundResponse" data-name="packlink::service::foundresponse">
      <a href="Packlink/Service/FoundResponse.html">FoundResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Hours" data-name="packlink::service::hours">
      <a href="Packlink/Service/Hours.html">Hours</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Info" data-name="packlink::service::info">
      <a href="Packlink/Service/Info.html">Info</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Insurance" data-name="packlink::service::insurance">
      <a href="Packlink/Service/Insurance.html">Insurance</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Item" data-name="packlink::service::item">
      <a href="Packlink/Service/Item.html">Item</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Price" data-name="packlink::service::price">
      <a href="Packlink/Service/Price.html">Price</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/Query" data-name="packlink::service::query">
      <a href="Packlink/Service/Query.html">Query</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Service/TimeLeftFirstAvailableDate" data-name="packlink::service::timeleftfirstavailabledate">
      <a href="Packlink/Service/TimeLeftFirstAvailableDate.html">TimeLeftFirstAvailableDate</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Shipment" data-name="packlink::shipment">
      <a href="Packlink/Shipment.html">Shipment</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Shipment/Address" data-name="packlink::shipment::address">
      <a href="Packlink/Shipment/Address.html">Address</a>
      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Shipment/Customs" data-name="packlink::shipment::customs">
      <a href="Packlink/Shipment/Customs.html">Customs</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Shipment/Customs/Item" data-name="packlink::shipment::customs::item">
      <a href="Packlink/Shipment/Customs/Item.html">Item</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Shipment/FindPath" data-name="packlink::shipment::findpath">
      <a href="Packlink/Shipment/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Shipment/FoundResponse" data-name="packlink::shipment::foundresponse">
      <a href="Packlink/Shipment/FoundResponse.html">FoundResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/Tracking" data-name="packlink::tracking">
      <a href="Packlink/Tracking.html">Tracking</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/Tracking/Event" data-name="packlink::tracking::event">
      <a href="Packlink/Tracking/Event.html">Event</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Tracking/FindPath" data-name="packlink::tracking::findpath">
      <a href="Packlink/Tracking/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Tracking/FoundResponse" data-name="packlink::tracking::foundresponse">
      <a href="Packlink/Tracking/FoundResponse.html">FoundResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="packlink/Packlink/User" data-name="packlink::user">
      <a href="Packlink/User.html">User</a>
      
        <ul>
  
  <li class=" " data-id="packlink/Packlink/User/CreatedResponse" data-name="packlink::user::createdresponse">
      <a href="Packlink/User/CreatedResponse.html">CreatedResponse</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/User/CreatePath" data-name="packlink::user::createpath">
      <a href="Packlink/User/CreatePath.html">CreatePath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/User/FindPath" data-name="packlink::user::findpath">
      <a href="Packlink/User/FindPath.html">FindPath</a>
      
    </li>
  
  <li class=" " data-id="packlink/Packlink/User/FoundResponse" data-name="packlink::user::foundresponse">
      <a href="Packlink/User/FoundResponse.html">FoundResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="packlink/Packlink/Util" data-name="packlink::util">
      <a href="Packlink/Util.html">Util</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="packlink-pro-api-client-for-crystal" class="anchor" href="#packlink-pro-api-client-for-crystal">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Packlink Pro API client for Crystal</h1>

<p>Compare Courier Services or Send a Parcel with Packlink. This is the unofficial
<a href="https://crystal-lang.org/">Crystal</a> shard for Packlink.</p>

<p><img src="https://img.shields.io/github/license/wout/packlink.cr" alt="GitHub"/>
<img src="https://img.shields.io/github/v/tag/wout/packlink.cr" alt="GitHub tag (latest SemVer)"/>
<img src="https://img.shields.io/github/workflow/status/wout/packlink.cr/Packlink%20CI" alt="GitHub Workflow Status"/></p>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<p>Add packlink as a depencency to your application's <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  packlink:
    github: wout/packlink.cr</code></pre>

<p>Then run <code>shards install</code>.</p>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<h3><a id="configuring-the-api-key" class="anchor" href="#configuring-the-api-key">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Configuring the API key</h3>

<p>To configure it globally, create an initializer and add the following line:</p>

<pre><code class="language-crystal"><span class="t">Packlink</span>.configure <span class="k">do</span> <span class="o">|</span>config<span class="o">|</span>
  config.api_key <span class="o">=</span> <span class="s">&quot;&lt;your-api-key&gt;&quot;</span>
  config.environment <span class="o">=</span> <span class="s">&quot;sandbox&quot;</span> <span class="c"># or &quot;production&quot;</span>
<span class="k">end</span></code></pre>

<p>You can also include a client instance in each request you make:</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>(<span class="s">&quot;&lt;your-api-key&gt;&quot;</span>)

<span class="k">begin</span>
  shipments <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Shipment</span>
    .from(<span class="s">&quot;GB&quot;</span>, <span class="s">&quot;BN2 1JJ&quot;</span>)
    .to(<span class="s">&quot;BE&quot;</span>, <span class="n">2000</span>)
    .package({width: <span class="n">40</span>, height: <span class="n">30</span>, length: <span class="n">25</span>, weight: <span class="n">5</span>})
    .all(client: client)
<span class="k">rescue</span> e : <span class="t">Packlink</span><span class="t">::</span><span class="t">RequestException</span>
  puts e.message
<span class="k">end</span></code></pre>

<p>If you need to do multiple calls with the same API key, use the following helper:</p>

<pre><code class="language-crystal"><span class="t">Packlink</span><span class="t">::</span><span class="t">Client</span>.with_api_key(<span class="s">&quot;&lt;your-api-key&gt;&quot;</span>) <span class="k">do</span> <span class="o">|</span>packlink<span class="o">|</span>
  <span class="k">begin</span>
    from_gb_to_be <span class="o">=</span> packlink.shipment
      .from(<span class="s">&quot;GB&quot;</span>, <span class="s">&quot;BN2 1JJ&quot;</span>).to(<span class="s">&quot;BE&quot;</span>, <span class="n">2000</span>)
      .package({width: <span class="n">40</span>, height: <span class="n">30</span>, length: <span class="n">25</span>, weight: <span class="n">5</span>}).all
    from_de_to_fr <span class="o">=</span> packlink.shipment
      .package({width: <span class="n">40</span>, height: <span class="n">30</span>, length: <span class="n">25</span>, weight: <span class="n">5</span>})
      .package({width: <span class="n">10</span>, height: <span class="n">10</span>, length: <span class="n">10</span>, weight: <span class="n">1</span>})
      .from(<span class="s">&quot;DE&quot;</span>, <span class="n">10587</span>).to(<span class="s">&quot;FR&quot;</span>, <span class="n">75013</span>).all
  <span class="k">rescue</span> e : <span class="t">Packlink</span><span class="t">::</span><span class="t">RequestException</span>
    puts e.message
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<p>Available scoped calls for a given API key are:</p>

<pre><code class="language-crystal"><span class="t">Packlink</span><span class="t">::</span><span class="t">Client</span>.with_api_key(<span class="s">&quot;&lt;your-api-key&gt;&quot;</span>) <span class="k">do</span> <span class="o">|</span>packlink<span class="o">|</span>
  packlink.callback.register(<span class="o">*</span>args)
  packlink.customs.pdf(<span class="o">*</span>args)
  packlink.draft.create(<span class="o">*</span>args)
  packlink.dropoff.all(<span class="o">*</span>args)
  packlink.label.all(<span class="o">*</span>args)
  packlink.order.create(<span class="o">*</span>args)
  packlink.service.find(<span class="o">*</span>args)
  packlink.service.from(<span class="o">*</span>args)
  packlink.service.to(<span class="o">*</span>args)
  packlink.service.package(<span class="o">*</span>args)
  packlink.shipment.find(<span class="o">*</span>args)
  packlink.tracking.history(<span class="o">*</span>args)
<span class="k">end</span></code></pre>

<h3><a id="registration-and-authentication" class="anchor" href="#registration-and-authentication">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Registration and Authentication</h3>

<p>User management is only required if you are creating accounts for other users.
For example, in a situation where other users can create an account for Packlink
through your platform or plugin.</p>

<h4><a id="register-a-new-user" class="anchor" href="#register-a-new-user">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Register a new user:</h4>

<pre><code class="language-crystal">temporary_token <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Register</span>.user({
  email:                     <span class="s">&quot;myaccount@packlink.com&quot;</span>,
  estimated_delivery_volume: <span class="s">&quot;1 - 10&quot;</span>,
  ip:                        <span class="s">&quot;123.123.123.123&quot;</span>,
  password:                  <span class="s">&quot;myPassword&quot;</span>,
  phone:                     <span class="s">&quot;+447987654321&quot;</span>,
  platform:                  <span class="s">&quot;PRO&quot;</span>,
  platform_country:          <span class="s">&quot;GB&quot;</span>,
  policies:                  {
    terms_and_conditions: <span class="n">true</span>,
    data_processing:      <span class="n">true</span>,
    marketing_emails:     <span class="n">true</span>,
    marketing_calls:      <span class="n">true</span>,
  },
  referral: {
    onboarding_product:     <span class="s">&quot;dummy&quot;</span>,
    onboarding_sub_product: <span class="s">&quot;sub_dummy&quot;</span>,
  },
  source: <span class="s">&quot;https://urlwhereregistrationoffered&quot;</span>,
})

puts temporary_token <span class="c"># =&gt; e0f90eacfa678e20051c3a5bc2bcc05a...</span></code></pre>

<h4><a id="activation" class="anchor" href="#activation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Activation</h4>

<p>Using the temporary token obtained at registration, check if the user is
activated.</p>

<pre><code class="language-crystal">active <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">User</span>.active?(<span class="s">&quot;e0f90eac...&quot;</span>)</code></pre>

<p>If the user is not active, the permanent api token can be obtained as follows:</p>

<pre><code class="language-crystal"><span class="k">unless</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">User</span>.active?(<span class="s">&quot;e0f90eac...&quot;</span>)
  permanent_token <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">User</span>.activate(<span class="s">&quot;e0f90eac...&quot;</span>)
  puts permanent_token <span class="c"># =&gt; fa678e20...</span>
<span class="k">end</span></code></pre>

<h4><a id="generating-a-new-token" class="anchor" href="#generating-a-new-token">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Generating a new token</h4>

<p>If a given user already has a Packlink Pro account, a new API key can be
generated:</p>

<pre><code class="language-crystal">token <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Auth</span>.generate({
  email:            <span class="s">&quot;myaccount@packlink.com&quot;</span>,
  password:         <span class="s">&quot;myPassword&quot;</span>,
  platform:         <span class="s">&quot;pro&quot;</span>,
  platform_country: <span class="s">&quot;gb&quot;</span>,
})
puts token <span class="c"># =&gt; fa678e20...</span></code></pre>

<h4><a id="password-reset" class="anchor" href="#password-reset">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Password reset</h4>

<p>If a given user has an account but forgot their password, a password reset link
can be requested:</p>

<pre><code class="language-crystal"><span class="t">Packlink</span><span class="t">::</span><span class="t">Auth</span>.reset_password({
  email:            <span class="s">&quot;myaccount@packlink.com&quot;</span>,
  platform:         <span class="s">&quot;pro&quot;</span>,
  platform_country: <span class="s">&quot;gb&quot;</span>,
})</code></pre>

<p><em>__Note:__ This will never fail and there is no response. If the email address
exists, an email will arrive. If not, nothing will happen.</em></p>

<h3><a id="get-services" class="anchor" href="#get-services">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get Services</h3>

<p>You need a source (<code>from</code>), destination (<code>to</code>) and at least one <code>package</code>:</p>

<pre><code class="language-crystal">services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>
  .from(<span class="s">&quot;GB&quot;</span>, <span class="s">&quot;BN2 1JJ&quot;</span>)
  .to(<span class="s">&quot;BE&quot;</span>, <span class="n">9000</span>)
  .package({width: <span class="n">15</span>, height: <span class="n">15</span>, length: <span class="n">15</span>, weight: <span class="n">1.5</span>})
  .all

service <span class="o">=</span> services.first

service.id                                  <span class="c"># =&gt; 20154</span>
service.carrier_name                        <span class="c"># =&gt; &quot;DPD&quot;</span>
service.name                                <span class="c"># =&gt; &quot;Classic Kleinpaket&quot;</span>
service.price.total_price                   <span class="c"># =&gt; 3.94</span>
service.price.currency                      <span class="c"># =&gt; &quot;EUR&quot;</span>
service.transit_hours                       <span class="c"># =&gt; &quot;24&quot;</span>
service.available_dates[<span class="s">&quot;2020/03/30&quot;</span>].from  <span class="c"># =&gt; &quot;08:00&quot;</span>
service.available_dates[<span class="s">&quot;2020/03/30&quot;</span>].till  <span class="c"># =&gt; &quot;18:00&quot;</span>
service.available_dates[<span class="s">&quot;2020/03/30&quot;</span>].to_s  <span class="c"># =&gt; &quot;08:00-18:00&quot;</span>
...</code></pre>

<p><em>__Note:__ For a full list if available fields, check the
<a href="https://github.com/wout/packlink.cr/blob/master/spec/fixtures/services/all-response.json">services spec fixture</a>.</em> </p>

<p>You can also add multiple packages and the order of the method chain is not
important:</p>

<pre><code class="language-crystal">services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>
  .package({width: <span class="n">40</span>, height: <span class="n">30</span>, length: <span class="n">25</span>, weight: <span class="n">5</span>})
  .from(<span class="s">&quot;GB&quot;</span>, <span class="s">&quot;BN2 1JJ&quot;</span>)
  .package({width: <span class="n">15</span>, height: <span class="n">15</span>, length: <span class="n">15</span>, weight: <span class="n">1.5</span>})
  .to(<span class="s">&quot;BE&quot;</span>, <span class="n">9000</span>)
  .package({width: <span class="n">20</span>, height: <span class="n">15</span>, length: <span class="n">10</span>, weight: <span class="n">3</span>})
  .all</code></pre>

<p>With an instance of a <code><a href="Packlink/Package.html">Packlink::Package</a></code> object:</p>

<pre><code class="language-crystal">package <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Package</span>.build({
  width: <span class="n">40</span>,
  height: <span class="n">30</span>,
  length: <span class="n">25</span>,
  weight: <span class="n">5</span>
})
services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>
  .package(package)
  .from(<span class="s">&quot;GB&quot;</span>, <span class="s">&quot;BN2 1JJ&quot;</span>)
  .to(<span class="s">&quot;BE&quot;</span>, <span class="n">9000</span>)
  .all</code></pre>

<p>For more clarity, or a different order, use named arguments:</p>

<pre><code class="language-crystal">services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>
  .package(package)
  .from(country: <span class="s">&quot;GB&quot;</span>, zip: <span class="s">&quot;BN2 1JJ&quot;</span>)
  .to(country: <span class="s">&quot;BE&quot;</span>, zip: <span class="n">9000</span>)
  .all</code></pre>

<p>Finally, you can also avoid the method chain and use a <code>NamedTuple</code> or <code>Hash</code>:</p>

<pre><code class="language-crystal">services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>.all(query: {
  from:     {country: <span class="s">&quot;DE&quot;</span>, zip: <span class="n">56457</span>},
  to:       {country: <span class="s">&quot;BE&quot;</span>, zip: <span class="n">9000</span>},
  packages: {
    <span class="s">&quot;0&quot;</span>: {width: <span class="n">10</span>, height: <span class="n">10</span>, length: <span class="n">10</span>, weight: <span class="n">1</span>},
  },
})</code></pre>

<p>Or even:</p>

<pre><code class="language-crystal">services <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>.all(query: {
  from:     {country: <span class="s">&quot;DE&quot;</span>, zip: <span class="n">56457</span>},
  to:       {country: <span class="s">&quot;BE&quot;</span>, zip: <span class="n">9000</span>},
  packages: {
    <span class="s">&quot;0&quot;</span>: <span class="t">Packlink</span><span class="t">::</span><span class="t">Package</span>.build({width: <span class="n">40</span>, height: <span class="n">30</span>, length: <span class="n">25</span>, weight: <span class="n">5</span>}),
  },
})</code></pre>

<h3><a id="get-available-services-details" class="anchor" href="#get-available-services-details">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get available services details</h3>

<p>If you know the id of a service, its details can be fetched as follows:</p>

<pre><code class="language-crystal">service <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Service</span>.find(<span class="n">20154</span>)</code></pre>

<h3><a id="get-dropoffs" class="anchor" href="#get-dropoffs">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get Dropoffs</h3>

<p>Gives you a list of the ten closest dropoff points.</p>

<pre><code class="language-crystal">dropoffs <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Dropoff</span>.all({
  service_id: <span class="n">21369</span>,
  country:    <span class="s">&quot;GB&quot;</span>,
  zip:        <span class="s">&quot;BN2 1JJ&quot;</span>,
})

dropoff <span class="o">=</span> dropoffs.first

dropoff.address               <span class="c"># =&gt; &quot;52 St. George&#39;s Road&quot;</span>
dropoff.city                  <span class="c"># =&gt; &quot;Brighton&quot;</span>
dropoff.commerce_name         <span class="c"># =&gt; &quot;St. Georges News&quot;</span>
dropoff.id                    <span class="c"># =&gt; &quot;S16271&quot;</span>
dropoff.lat                   <span class="c"># =&gt; 50.817563999999997</span>
dropoff.long                  <span class="c"># =&gt; -0.118057</span>
dropoff.opening_times.monday  <span class="c"># =&gt; &quot;06:00-21:00&quot;</span>
dropoff.phone                 <span class="c"># =&gt; &quot;07461451073&quot;</span>
dropoff.zip                   <span class="c"># =&gt; &quot;BN2 1EF&quot;</span></code></pre>

<h3><a id="create-order" class="anchor" href="#create-order">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Create Order</h3>

<p>Creates a new order. Each order can include several shipments.</p>

<p>An order consists of multiple parts, and that is how one should be built. It is
also possible to use one large <code>Hash</code> or <code>NamedTuple</code>. But using the method
below ensures type safety and completeness of the posted data.</p>

<pre><code class="language-crystal"><span class="c"># 1. Build one or more packages</span>
package <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Package</span>.build({
  width: <span class="n">15</span>,
  height: <span class="n">15</span>,
  length: <span class="n">10</span>,
  weight: <span class="n">1</span>
})

<span class="c"># 2. Build a source address</span>
from_address <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Address</span>.build({
  city:     <span class="s">&quot;Cannes&quot;</span>,
  country:  <span class="s">&quot;FR&quot;</span>,
  email:    <span class="s">&quot;test@packlink.com&quot;</span>,
  name:     <span class="s">&quot;TestName&quot;</span>,
  phone:    <span class="s">&quot;0666559988&quot;</span>,
  state:    <span class="s">&quot;FR&quot;</span>,
  street1:  <span class="s">&quot;Suffren 3&quot;</span>,
  surname:  <span class="s">&quot;TestLastName&quot;</span>,
  zip_code: <span class="s">&quot;06400&quot;</span>,
})

<span class="c"># 3. Build a destination address</span>
to_address <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Address</span>.build({
  city:     <span class="s">&quot;Paris&quot;</span>,
  country:  <span class="s">&quot;FR&quot;</span>,
  email:    <span class="s">&quot;test@packlink.com&quot;</span>,
  name:     <span class="s">&quot;TestName&quot;</span>,
  phone:    <span class="s">&quot;630465777&quot;</span>,
  state:    <span class="s">&quot;FR&quot;</span>,
  street1:  <span class="s">&quot;Avenue Marchal 1&quot;</span>,
  surname:  <span class="s">&quot;TestLastName&quot;</span>,
  zip_code: <span class="s">&quot;75001&quot;</span>,
})

<span class="c"># 3b. Build a customs object (only required for shipments outside the EU)</span>
customs <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Shipment</span><span class="t">::</span><span class="t">Customs</span>.build({
  eori_number:       <span class="s">&quot;GB123456789000&quot;</span>,
  sender_personalid: <span class="s">&quot;EX123456&quot;</span>,
  sender_type:       <span class="s">&quot;private&quot;</span>,
  shipment_type:     <span class="s">&quot;gift&quot;</span>,
  vat_number:        <span class="s">&quot;GB123456789&quot;</span>,
  items:             [{
    description_english: <span class="s">&quot;Hairdryer&quot;</span>,
    quantity:            <span class="n">2</span>,
    weight:              <span class="n">1.3</span>,
    value:               <span class="n">33.5</span>,
    country_of_origin:   <span class="s">&quot;GB&quot;</span>,
  }],
})

<span class="c"># 4. Build shipment (can be multiple within one order)</span>
shipment <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Order</span><span class="t">::</span><span class="t">Shipment</span>.build({
  from:                       from_address,
  to:                         to_address,
  packages:                   [package],
  customs:                    customs,
  content:                    <span class="s">&quot;Test content&quot;</span>,
  contentvalue:               <span class="n">160</span>,
  dropoff_point_id:           <span class="s">&quot;062049&quot;</span>,
  service_id:                 <span class="n">20149</span>,
  shipment_custom_reference:  <span class="s">&quot;69a280b2-f7db-11e6-915e-5c54c4398ed2&quot;</span>,
  source:                     <span class="s">&quot;source_inbound&quot;</span>,
})

<span class="c"># 5. Create order</span>
order <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Order</span>.create({
  order_custom_reference: <span class="s">&quot;Beautiful leggins from eBay&quot;</span>,
  shipments:              [shipment]
})

<span class="c"># If everything went well, you will receive an order summary:</span>

order.order_reference             <span class="c"># =&gt; &quot;DE00019732CF&quot;</span>
order.total_amount                <span class="c"># =&gt; 4.9</span>

line <span class="o">=</span> order.shipments.first      <span class="c"># =&gt; Packlink::Order::ShipmentLine</span>

line.shipment_custom_reference    <span class="c"># =&gt; &quot;eBay_11993382332&quot;</span>
line.shipment_reference           <span class="c"># =&gt; &quot;DE000193392AB&quot;</span>
line.insurance_coverage_amount    <span class="c"># =&gt; 750.0</span>
line.total_price                  <span class="c"># =&gt; 4.9</span>
line.receipt                      <span class="c"># =&gt; &quot;http://url/to/receipt&quot;</span></code></pre>

<h3><a id="create-draft" class="anchor" href="#create-draft">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Create Draft</h3>

<p>Creates a new draft shipment. Building a draft shipment is exactly the same as
building a shipment for an order, except that in a draft, all fields are
optional.</p>

<pre><code class="language-crystal">draft <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Draft</span>.create({
  from:                       from_address,
  to:                         to_address,
  packages:                   [package],
  content:                    <span class="s">&quot;Test content&quot;</span>,
  contentvalue:               <span class="n">160</span>,
  dropoff_point_id:           <span class="s">&quot;062049&quot;</span>,
  service_id:                 <span class="n">20149</span>,
  shipment_custom_reference:  <span class="s">&quot;69a280b2-f7db-11e6-915e-5c54c4398ed2&quot;</span>,
  source:                     <span class="s">&quot;source_inbound&quot;</span>,
})

draft.shipment_reference   <span class="c"># =&gt; &quot;DE00019732CF&quot;</span></code></pre>

<h3><a id="get-labels" class="anchor" href="#get-labels">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get Labels</h3>

<p>Returns the shipping labels in PDF format (A4) for the given shipment
reference:</p>

<pre><code class="language-crystal">labels <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Label</span>.all(<span class="s">&quot;ES00019388AB&quot;</span>)

puts labels.first   <span class="c"># =&gt; &quot;http://packlink.de/de/purchase/PostVenta/getLabelsByRef?ref=52cf...&quot;</span></code></pre>

<p><em>__Note:__ In many cases, there will only be one shipping label.</em></p>

<h3><a id="get-customs" class="anchor" href="#get-customs">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get Customs</h3>

<p>Returns the shipping customs PDF url.</p>

<pre><code class="language-crystal">pdf <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Customs</span>.pdf(<span class="s">&quot;DE2015API0000003515&quot;</span>)

puts pdf   <span class="c"># =&gt; &quot;http://static.packitos.com/prodev-pro/customs/c24a19d1bf25df8...&quot;</span></code></pre>

<h3><a id="get-shipment-details" class="anchor" href="#get-shipment-details">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get Shipment Details</h3>

<p>Returns the shipping details.</p>

<pre><code class="language-crystal">shipment <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Shipment</span>.find(<span class="s">&quot;DE2015API0000003515&quot;</span>)

shipment.base_price         <span class="c"># =&gt; 15.85</span>
shipment.carrier            <span class="c"># =&gt; &quot;Mondial Relay&quot;</span>
shipment.collection.city    <span class="c"># =&gt; &quot;Paris&quot;</span>
shipment.collection.name    <span class="c"># =&gt; &quot;Daniel Werner&quot;</span>
shipment.collection_date    <span class="c"># =&gt; &quot;2015-04-16&quot;</span>
shipment.collection_hour    <span class="c"># =&gt; &quot;00:00-24:00&quot;</span>
...</code></pre>

<p><em>__Note:__ For a full list if available fields, check the
<a href="https://github.com/wout/packlink.cr/blob/master/spec/fixtures/shipments/get-response.json">shipment spec fixture</a>.</em></p>

<h3><a id="track-a-shipment" class="anchor" href="#track-a-shipment">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Track a Shipment</h3>

<p>Returns the tracking history of your shipment.</p>

<pre><code class="language-crystal">history <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Tracking</span>.history(<span class="s">&quot;ES00019388AB&quot;</span>)
event <span class="o">=</span> history.first

event.city          <span class="c"># =&gt; &quot;MIAMI&quot;</span>
event.created_at    <span class="c"># =&gt; 2020-02-18 04:03:20.0 UTC : Time</span>
event.description   <span class="c"># =&gt; &quot;DELIVERED&quot;</span>
event.timestamp     <span class="c"># =&gt; 14242322</span></code></pre>

<h3><a id="registering-and-receiving-shipment-callbacks" class="anchor" href="#registering-and-receiving-shipment-callbacks">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Registering and receiving Shipment Callbacks</h3>

<p>Store a url to notifiy shipment events. This call should be done only once per
Packlink client since the configured url will be used to send status updates for
all shipments of the client.</p>

<pre><code class="language-crystal">success <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Callback</span>.register(<span class="s">&quot;https://www.urlexample.com/packlink&quot;</span>)

puts success   <span class="c"># =&gt; true</span></code></pre>

<h4><a id="event-callbacks" class="anchor" href="#event-callbacks">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Event Callbacks</h4>

<p>On the configured endpoints, you could process the events as follows:</p>

<pre><code class="language-crystal"><span class="c"># grab the posted JSON</span>
json <span class="o">=</span> post.body

<span class="c"># parse the event</span>
event <span class="o">=</span> <span class="t">Packlink</span><span class="t">::</span><span class="t">Callback</span><span class="t">::</span><span class="t">Event</span>.from_json(json)

event.name                            <span class="c"># =&gt; &quot;shipment.carrier.success&quot;</span>
event.created_at                      <span class="c"># =&gt; 2020-01-01 15:55:23.0 UTC : Time</span>
event.data.shipment_custom_reference  <span class="c"># =&gt; &quot;eBay_11993382332589&quot;</span>
event.data.shipment_reference         <span class="c"># =&gt; &quot;DE567YH981230AA&quot;</span></code></pre>

<h4><a id="available-events" class="anchor" href="#available-events">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Available events</h4>

<ul><li><code>shipment.carrier.success</code>: Shipment registered successfully in carrier's system.</li><li><code>shipment.carrier.fail</code>: Shipment failed to register in carrier's system.</li><li><code>shipment.label.ready</code>: Labels ready to print.</li><li><code>shipment.label.fail</code>: Labels have failed.</li><li><code>shipment.tracking.update</code>: Shipment is in transit.</li><li><code>shipment.delivered</code>: Shipment has been delivered.</li></ul>

<h2><a id="documentation" class="anchor" href="#documentation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Documentation</h2>

<ul><li><a href="https://wout.github.io/packlink.cr/">Shard API Docs</a></li></ul>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li>Fork it at https://github.com/wout/packlink.cr/fork</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/wout">wout</a> - creator and maintainer</li></ul>
</div>
</body>
</html>
